<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="zh-CN">
    <generator uri="https://gohugo.io/" version="0.67.1">Hugo</generator><title type="html"><![CDATA[木木木木木]]></title>
    
    
    
            <link href="https://immmmm.com/atom.xml" rel="self" type="application/rss+xml" title="atom" />
            <link href="https://immmmm.com/" rel="alternate" type="text/html" title="HTML" />
            <link href="https://immmmm.com/index.json" rel="alternate" type="application/json" title="JSON" />
    <updated>2021-01-16T15:07:50+00:00</updated>
    
    
    
    
        <id>https://immmmm.com/atom.xml</id>
    
        
        <entry>
            <title type="html"><![CDATA[熟悉的味道，不一样配方]]></title>
            <link href="https://immmmm.com/bb-talks-json/" rel="alternate" type="text/html" />
            
                <id>https://immmmm.com/bb-talks-json/</id>
            
            
            <published>2021-01-16T22:26:12+08:00</published>
            <updated>2021-01-16T22:26:12+08:00</updated>
            
            
            <content type="html"><![CDATA[<p>⬆ ⬆ ⬆ 效果见首页 ⬆ ⬆ ⬆</p>
<p>多么熟悉啊，遥想当年也算是折腾 WP 必备项，调取啁啾、饭否、TX说说 <del>没微博什么事</del> 的最新一条消息在博客头部显示。</p>
<p>这不，腾讯 Cloudbase 也折腾快个把月，继续薅！</p>




	
		
			
			
		
	


<div class="post-preview">
  <div class="post-preview--meta" style="width:100%;">
    <div class="post-preview--middle">
      <h4 class="post-preview--title">
        <a target="_blank" href="https://immmmm.com/bb-by-wechat-pro/">「哔哔点啥」微信公众号 2.0</a>
      </h4>
      <time class="post-preview--date">2021-01-06</time>
      
      <small>#折腾&nbsp;</small>
      
      <section style="max-height:96px;overflow:hidden;" class="post-preview--excerpt">
         「哔哔点啥」微信公众号 2.0 原是发到 LeanCloud 平台，现 2.0 是发到 「腾讯 CloudBase」 。目前已支持用户名绑定、解绑、发文字、发图片、追加、合并、删除、替换文字，还有显示哔哔列表、哔哔搜索！
 /l - 显示最近哔哔
/s 关键词 - 搜索相关哔哔
/a 文字 - 追加文字到第1条
/a数字 文字 - 追加文字到第几条，如 /a2 文字
/c - 合并前2条
/c数字 - 合并前几条，如 /c3
/d - 删除第1条
/d数字 - 删除第几条，如 /d2
/e 文字- 编辑替换第1条
/e数字 文字 - 编辑替换第几条，如 /e2 文字
/f数字 - 批量删除前几条，如 /f2
/nobber - 解除绑定
/bber KEY,HTTP访问地址 - 添加绑定
 对，绑定只需要2个信息，一个自定义的 KEY 和 云函数的http访问地址

      </section>
    </div>
  </div>
  
    <img rel="link" loading="lazy" class="post-preview--image avatar" src="https://lmm.elizen.me/images/2020/12/bber-11.png">
  
</div>

<p>既然云函数里用的是 NodeJS 大法，TCB又有足足5G的 <code>云存储</code> ，还自带 HTTPS 的 CDN ！想到，索性把<strong>哔哔</strong>转存一份为 <code>json</code> 呗！有了json文件前端一句 <code>$.getjson</code> 动态加载，太惬意！完全把那庞大地 tcb-js 抛之脑后！</p>
<h3 id="新建转存-json-云函数">新建转存 JSON 云函数</h3>
<p>首先新建个云函数 <code>bber-talk</code>，打开 <a href="https://github.com/lmm214/bber/blob/main/bber-talk/index.js">index.js</a> 代码复制进去保存，新建并打开 <a href="https://github.com/lmm214/bber/blob/main/bber-talk/package.json">package.json</a> 代码复制进去保存并安装依赖。</p>
<h3 id="原云函数添加异步代码">原云函数添加异步代码</h3>
<p>在之前 <a href="https://github.com/lmm214/bber/blob/main/bber/index.js">bber</a> 的 <code>index.js</code> 内添加以上代码，实现异步转存 Json 文件。</p>
<p><img loading='lazy' src="https://lmm.elizen.me/images/2020/12/bbtalk-1.png" alt="bbtalk-1"  /></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">//异步转存json
</span><span style="color:#75715e"></span><span style="color:#66d9ef">try</span> {
    <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">callFunction</span>({<span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;bber-talk&#39;</span>}, { <span style="color:#a6e22e">timeout</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">300</span> })
} <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;开始异步转存json&#39;</span>)
}
</code></pre></div><h3 id="云存储获取链接及缓存设置">云存储获取链接及缓存设置</h3>
<p>进<strong>云存储&ndash;json&ndash;bber.json</strong>，详情&ndash;下载地址，得到下面格式地址：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">https://6262-bb-f5c0f-1252354806.tcb.qcloud.la/json/bber.json
</code></pre></div><p>点击上面的 <code>缓存设置</code>，如下设置：</p>
<p><img loading='lazy' src="https://lmm.elizen.me/images/2020/12/bbtalk-2.png" alt="bbtalk-2"  /></p>
<h3 id="前端调用代码">前端调用代码</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;bber-talk&#34;</span>&gt;&lt;/<span style="color:#f92672">div</span>&gt;
</code></pre></div><p>下面 <code>jsonUrl</code> 链接改为自己云存储的</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">//依赖 jQuery 库，其中 jsonUrl 改为自己的
</span><span style="color:#75715e"></span><span style="color:#a6e22e">$</span>(document).<span style="color:#a6e22e">ready</span>(<span style="color:#66d9ef">function</span>(){
  <span style="color:#66d9ef">if</span> ( <span style="color:#a6e22e">$</span>(<span style="color:#e6db74">&#34;#bber-talk&#34;</span>).<span style="color:#a6e22e">length</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> ) {
    <span style="color:#a6e22e">jsonUrl</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://6262-bb-f5c0f-1252354806.tcb.qcloud.la/json/bber.json&#34;</span>
    <span style="color:#a6e22e">$</span>.<span style="color:#a6e22e">getJSON</span>(<span style="color:#a6e22e">jsonUrl</span><span style="color:#f92672">+</span><span style="color:#e6db74">&#34;?t=&#34;</span><span style="color:#f92672">+</span>Date.<span style="color:#a6e22e">parse</span>( <span style="color:#66d9ef">new</span> Date()),<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">res</span>){
      <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">bberHtml</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
      <span style="color:#a6e22e">$</span>.<span style="color:#a6e22e">each</span>(<span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">data</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">item</span>){
        <span style="color:#a6e22e">d</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Date(<span style="color:#a6e22e">item</span>.<span style="color:#a6e22e">date</span>)
        <span style="color:#a6e22e">date</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">d</span>.<span style="color:#a6e22e">getFullYear</span>()<span style="color:#f92672">+</span><span style="color:#e6db74">&#39;/&#39;</span><span style="color:#f92672">+</span>(<span style="color:#a6e22e">d</span>.<span style="color:#a6e22e">getMonth</span>()<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">+</span><span style="color:#e6db74">&#39;/&#39;</span><span style="color:#f92672">+</span><span style="color:#a6e22e">d</span>.<span style="color:#a6e22e">getDate</span>() <span style="color:#f92672">+</span><span style="color:#e6db74">&#39; &#39;</span><span style="color:#f92672">+</span><span style="color:#a6e22e">d</span>.<span style="color:#a6e22e">getHours</span>()<span style="color:#f92672">+</span><span style="color:#e6db74">&#39;:&#39;</span><span style="color:#f92672">+</span><span style="color:#a6e22e">d</span>.<span style="color:#a6e22e">getMinutes</span>()<span style="color:#f92672">+</span><span style="color:#e6db74">&#39;:&#39;</span><span style="color:#f92672">+</span><span style="color:#a6e22e">d</span>.<span style="color:#a6e22e">getSeconds</span>()
        <span style="color:#a6e22e">dataTime</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&lt;span class=&#34;datatime&#34;&gt;&#39;</span><span style="color:#f92672">+</span><span style="color:#a6e22e">date</span><span style="color:#f92672">+</span><span style="color:#e6db74">&#39;&lt;/span&gt;&#39;</span>
        <span style="color:#a6e22e">bberHtml</span> <span style="color:#f92672">+=</span> <span style="color:#e6db74">&#39;&lt;li class=&#34;item item-&#39;</span><span style="color:#f92672">+</span>(<span style="color:#a6e22e">i</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">+</span><span style="color:#e6db74">&#39;&#34;&gt;&#39;</span><span style="color:#f92672">+</span><span style="color:#a6e22e">dataTime</span><span style="color:#f92672">+</span><span style="color:#e6db74">&#39;： &lt;a href=&#34;https://immmmm.com/bb/&#34;&gt;&#39;</span><span style="color:#f92672">+</span><span style="color:#a6e22e">item</span>.<span style="color:#a6e22e">content</span><span style="color:#f92672">+</span><span style="color:#e6db74">&#39;&lt;/a&gt;&lt;/li&gt;&#39;</span>
      });
      <span style="color:#a6e22e">$</span>(<span style="color:#e6db74">&#39;#bber-talk&#39;</span>).<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#39;&lt;span class=&#34;index-talk-icon&#34;&gt;&lt;svg viewBox=&#34;0 0 1024 1024&#34; width=&#34;21&#34; height=&#34;21&#34;&gt;&lt;path d=&#34;M184.32 891.667692c-12.603077 0-25.206154-2.363077-37.809231-7.876923-37.021538-14.966154-59.864615-49.624615-59.864615-89.009231v-275.692307c0-212.676923 173.292308-385.969231 385.969231-385.969231h78.76923c212.676923 0 385.969231 173.292308 385.969231 385.969231 0 169.353846-137.846154 307.2-307.2 307.2H289.083077l-37.021539 37.021538c-18.904615 18.116923-43.323077 28.356923-67.741538 28.356923zM472.615385 195.347692c-178.018462 0-322.953846 144.935385-322.953847 322.953846v275.692308c0 21.267692 15.753846 29.144615 20.48 31.507692 4.726154 2.363077 22.055385 7.876923 37.021539-7.08923l46.473846-46.473846c6.301538-6.301538 14.178462-9.452308 22.055385-9.452308h354.461538c134.695385 0 244.184615-109.489231 244.184616-244.184616 0-178.018462-144.935385-322.953846-322.953847-322.953846H472.615385z&#34;&gt;&lt;/path&gt;&lt;path d=&#34;M321.378462 512m-59.076924 0a59.076923 59.076923 0 1 0 118.153847 0 59.076923 59.076923 0 1 0-118.153847 0Z&#34;&gt;&lt;/path&gt;&lt;path d=&#34;M518.301538 512m-59.076923 0a59.076923 59.076923 0 1 0 118.153847 0 59.076923 59.076923 0 1 0-118.153847 0Z&#34;&gt;&lt;/path&gt;&lt;path d=&#34;M715.224615 512m-59.076923 0a59.076923 59.076923 0 1 0 118.153846 0 59.076923 59.076923 0 1 0-118.153846 0Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/span&gt;&lt;ul class=&#34;talk-list&#34;&gt;&#39;</span><span style="color:#f92672">+</span><span style="color:#a6e22e">bberHtml</span><span style="color:#f92672">+</span><span style="color:#e6db74">&#39;&lt;/ul&gt;&#39;</span>)
      <span style="color:#a6e22e">Lately</span>({ <span style="color:#e6db74">&#39;target&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;#bber-talk .datatime&#39;</span> });
    });
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">Roll</span> (){
      <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">list_li</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">$</span>(<span style="color:#e6db74">&#39;.talk-list li&#39;</span>),<span style="color:#a6e22e">cur_li</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">list_li</span>.<span style="color:#a6e22e">first</span>(),<span style="color:#a6e22e">last_li</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">list_li</span>.<span style="color:#a6e22e">last</span>();
      <span style="color:#a6e22e">last_li</span>.<span style="color:#a6e22e">after</span>(<span style="color:#a6e22e">cur_li</span>);
    };
    <span style="color:#a6e22e">setInterval</span>(<span style="color:#a6e22e">Roll</span>,<span style="color:#ae81ff">3000</span>);
  }
});
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css">#bber-talk{<span style="color:#66d9ef">display</span>:<span style="color:#66d9ef">-webkit-</span><span style="color:#66d9ef">flex</span>;<span style="color:#66d9ef">display</span>:<span style="color:#66d9ef">flex</span>;<span style="color:#66d9ef">width</span>:<span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>;<span style="color:#66d9ef">line-height</span>:<span style="color:#ae81ff">2</span><span style="color:#66d9ef">em</span>;<span style="color:#66d9ef">height</span>:<span style="color:#ae81ff">45</span><span style="color:#66d9ef">px</span>;<span style="color:#66d9ef">max-width</span>:<span style="color:#ae81ff">760</span><span style="color:#66d9ef">px</span>;<span style="color:#66d9ef">text-align</span>:<span style="color:#66d9ef">left</span>;<span style="color:#66d9ef">padding</span>:<span style="color:#ae81ff">5</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">15</span><span style="color:#66d9ef">px</span>;<span style="color:#66d9ef">margin-bottom</span>:<span style="color:#ae81ff">3</span><span style="color:#66d9ef">em</span>;<span style="color:#66d9ef">position</span>: <span style="color:#66d9ef">relative</span>;<span style="color:#66d9ef">background-color</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>light<span style="color:#f92672">-</span>header);<span style="color:#66d9ef">border-radius</span>:<span style="color:#ae81ff">8</span><span style="color:#66d9ef">px</span>;<span style="color:#66d9ef">font-size</span>:<span style="color:#ae81ff">15</span><span style="color:#66d9ef">px</span>;}
#bber-talk <span style="color:#f92672">svg</span>{fill: <span style="color:#66d9ef">currentColor</span>;<span style="color:#66d9ef">vertical-align</span>: <span style="color:#66d9ef">middle</span>;<span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">inline</span>;<span style="color:#66d9ef">margin-right</span>:<span style="color:#ae81ff">5</span><span style="color:#66d9ef">px</span>;}
.<span style="color:#a6e22e">talk-list</span>{<span style="color:#66d9ef">margin</span>: <span style="color:#ae81ff">0</span>;<span style="color:#66d9ef">max-height</span>: <span style="color:#ae81ff">35</span><span style="color:#66d9ef">px</span>;<span style="color:#66d9ef">overflow</span>: <span style="color:#66d9ef">hidden</span>;}
.<span style="color:#a6e22e">talk-list</span> <span style="color:#f92672">li</span> {<span style="color:#66d9ef">list-style</span>: <span style="color:#66d9ef">none</span>;<span style="color:#66d9ef">margin-bottom</span>: <span style="color:#ae81ff">10</span><span style="color:#66d9ef">px</span>;<span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>;<span style="color:#66d9ef">white-space</span>: <span style="color:#66d9ef">nowrap</span>;<span style="color:#66d9ef">text-overflow</span>: <span style="color:#66d9ef">ellipsis</span>;<span style="color:#66d9ef">overflow</span>: <span style="color:#66d9ef">hidden</span>;}
</code></pre></div><p>END.</p>]]></content>
            
                 
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://immmmm.com/tags/%E6%8A%98%E8%85%BE" term="%E6%8A%98%E8%85%BE" label="折腾" />
                            
                        
                    
                
            
        </entry>
    
        
        <entry>
            <title type="html"><![CDATA[腾讯 CloudBase ，开启一键部署]]></title>
            <link href="https://immmmm.com/tx-cloudbase-framework/" rel="alternate" type="text/html" />
            
                <id>https://immmmm.com/tx-cloudbase-framework/</id>
            
            
            <published>2021-01-09T22:26:22+08:00</published>
            <updated>2021-01-09T22:26:22+08:00</updated>
            
            
            <content type="html"><![CDATA[<blockquote>
<p>一键部署按钮可以让公开的 Git 项目一键部署到云开发 CloudBase 上，大大简化用户部署的门槛，方便用户快速使用和体验应用。一键部署功能支持 Github，Gitlab，Coding，Gitee 等 Git 仓库地址。</p>
</blockquote>
<p>利用 <a href="https://docs.cloudbase.net/framework/plugins/">CloudBase Framework</a> 把应用配置写在一个 <code>cloudbaserc.json</code> 文件中，把这个配置和相关文件上传仓库，然后生成 <a href="https://docs.cloudbase.net/framework/deploy-button.html#bu-shu-an-niu-shi-ru-he-gong-zuo-de">一键部署按钮</a> 。</p>
<p>比如 BBer 的 Git仓库目录：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">├── bber
│   ├── index.js
│   └── package.json
└── cloudbaserc.json
</code></pre></div><p>它的一键部署链接，其实就下面这句：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">https://console.cloud.tencent.com/tcb/env/index?action=CreateAndDeployCloudBaseProject<span style="color:#960050;background-color:#1e0010">&amp;</span>appUrl=https://github.com/lmm214/bber<span style="color:#960050;background-color:#1e0010">&amp;</span>branch=main
</code></pre></div><p>打开链接 Tcb 会根据 <code>cloudbaserc.json</code> 内的配置自动构建云函数、数据库、云存储等等内容。以 BBer 为例，能不能一键部署成功，还得<del>看脸</del>看配置文件：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="color:#f92672">&#34;version&#34;</span>: <span style="color:#e6db74">&#34;2.0&#34;</span>,  <span style="color:#960050;background-color:#1e0010">//一开始随后改成</span> <span style="color:#960050;background-color:#1e0010">1.0</span> <span style="color:#960050;background-color:#1e0010">悲催一整夜！</span>
  <span style="color:#f92672">&#34;envId&#34;</span>: <span style="color:#e6db74">&#34;{{envId}}&#34;</span>,  <span style="color:#960050;background-color:#1e0010">//2.0才能用这个动态变量</span> <span style="color:#960050;background-color:#1e0010">{{envId</span>}<span style="color:#960050;background-color:#1e0010">}</span>
  <span style="color:#e6db74">&#34;functionRootPath&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#e6db74">&#34;.&#34;</span><span style="color:#960050;background-color:#1e0010">,</span>  <span style="color:#960050;background-color:#1e0010">//根目录就一个点</span>
  <span style="color:#e6db74">&#34;functions&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> [
    {
      <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;bber&#34;</span>,
      <span style="color:#f92672">&#34;timeout&#34;</span>: <span style="color:#ae81ff">30</span>,
      <span style="color:#f92672">&#34;runtime&#34;</span>: <span style="color:#e6db74">&#34;Nodejs10.15&#34;</span>,
      <span style="color:#f92672">&#34;memorySize&#34;</span>: <span style="color:#ae81ff">128</span>,
      <span style="color:#f92672">&#34;handler&#34;</span>: <span style="color:#e6db74">&#34;index.main&#34;</span>
    }
  ]<span style="color:#960050;background-color:#1e0010">,</span>
  <span style="color:#e6db74">&#34;framework&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> {
    <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;bber&#34;</span>,
    <span style="color:#f92672">&#34;plugins&#34;</span>: {
      <span style="color:#f92672">&#34;function&#34;</span>: {  <span style="color:#960050;background-color:#1e0010">//部署云函数文件</span> <span style="color:#960050;background-color:#1e0010">index.js</span> <span style="color:#960050;background-color:#1e0010">和</span> <span style="color:#960050;background-color:#1e0010">package.json</span>
        <span style="color:#f92672">&#34;use&#34;</span>: <span style="color:#e6db74">&#34;@cloudbase/framework-plugin-function&#34;</span>,
        <span style="color:#f92672">&#34;inputs&#34;</span>: {
          <span style="color:#f92672">&#34;functionRootPath&#34;</span>: <span style="color:#e6db74">&#34;.&#34;</span>,
          <span style="color:#f92672">&#34;functions&#34;</span>: [{ <span style="color:#960050;background-color:#1e0010">//云函数名儿</span>
              <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;bber&#34;</span>,
              <span style="color:#f92672">&#34;timeout&#34;</span>: <span style="color:#ae81ff">30</span>,
              <span style="color:#f92672">&#34;envVariables&#34;</span>: {},
              <span style="color:#f92672">&#34;runtime&#34;</span>: <span style="color:#e6db74">&#34;Nodejs10.15&#34;</span>,
              <span style="color:#f92672">&#34;memory&#34;</span>: <span style="color:#ae81ff">128</span>
          }],
          <span style="color:#f92672">&#34;servicePaths&#34;</span>: { <span style="color:#960050;background-color:#1e0010">//开启http访问链接</span>
            <span style="color:#f92672">&#34;bber&#34;</span>: <span style="color:#e6db74">&#34;/bber&#34;</span>
          }
        }
      },
      <span style="color:#f92672">&#34;client&#34;</span>: {  <span style="color:#960050;background-color:#1e0010">//创建数据库集合</span>
        <span style="color:#f92672">&#34;use&#34;</span>: <span style="color:#e6db74">&#34;@cloudbase/framework-plugin-database&#34;</span>,
        <span style="color:#f92672">&#34;inputs&#34;</span>: {
          <span style="color:#f92672">&#34;collections&#34;</span>: [
            {
              <span style="color:#f92672">&#34;collectionName&#34;</span>: <span style="color:#e6db74">&#34;talks&#34;</span>,  <span style="color:#960050;background-color:#1e0010">//集合名儿</span>
              <span style="color:#f92672">&#34;aclTag&#34;</span>: <span style="color:#e6db74">&#34;ADMINWRITE&#34;</span>  <span style="color:#960050;background-color:#1e0010">//权限为所有人可读仅管理员可写</span>
            }
          ]
        }
      }
    }
  }
<span style="color:#960050;background-color:#1e0010">}</span>
</code></pre></div><p>更多其它插件看官方文档：<a href="https://docs.cloudbase.net/framework/plugins/">云开发 CloudBase 插件</a></p>
<p>好了，简简单单一个配置文件一个链接，把 BBer 应用需要的手动云函数、手动数据库、手动HTTP访问链接，一键部署！</p>]]></content>
            
                 
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://immmmm.com/tags/%E6%8A%98%E8%85%BE" term="%E6%8A%98%E8%85%BE" label="折腾" />
                            
                        
                    
                
            
        </entry>
    
        
        <entry>
            <title type="html"><![CDATA[「哔哔点啥」微信公众号 2.0]]></title>
            <link href="https://immmmm.com/bb-by-wechat-pro/" rel="alternate" type="text/html" />
            
                <id>https://immmmm.com/bb-by-wechat-pro/</id>
            
            
            <published>2021-01-06T20:22:49+08:00</published>
            <updated>2021-01-06T20:22:49+08:00</updated>
            
            
            <content type="html"><![CDATA[<figure>
    <img src="https://lmm.elizen.me/images/2020/05/bbds.png"/><figcaption>「哔哔点啥」微信公众号 2.0</figcaption></figure>

<p>原是发到 LeanCloud 平台，现 2.0 是发到 <strong>「腾讯 CloudBase」</strong> 。目前已支持用户名绑定、解绑、发文字、<strong>发图片</strong>、追加、合并、删除、替换文字，还有显示<strong>哔哔列表</strong>、<strong>哔哔搜索</strong>！</p>
<blockquote>
<p><code>/l</code> - 显示最近哔哔</p>
<p><code>/s 关键词</code> - 搜索相关哔哔</p>
<p><code>/a 文字</code> - 追加文字到第1条</p>
<p><code>/a数字 文字</code> - 追加文字到第几条，如 /a2 文字</p>
<p><code>/c</code> - 合并前2条</p>
<p><code>/c数字</code> - 合并前几条，如 /c3</p>
<p><code>/d</code> - 删除第1条</p>
<p><code>/d数字</code> - 删除第几条，如 /d2</p>
<p><code>/e 文字</code>- 编辑替换第1条</p>
<p><code>/e数字 文字</code> - 编辑替换第几条，如 /e2 文字</p>
<p><code>/f数字</code> - 批量删除前几条，如 /f2</p>
<p><code>/nobber</code> - 解除绑定</p>
<p><code>/bber KEY,HTTP访问地址</code> - 添加绑定</p>
</blockquote>
<p>对，绑定只需要2个信息，一个自定义的 <code>KEY</code> 和 <code>云函数的http访问地址</code></p>
<h3 id="日常使用截图">日常使用截图</h3>
<blockquote>
<p>使用 /a 命令给图片追加个文字，真香！</p>
</blockquote>
<figure>
    <img src="https://lmm.elizen.me/images/2020/12/bber-1.PNG" width="50%"/><img src="https://lmm.elizen.me/images/2020/12/bber-2.PNG" width="50%" />
    <figcaption>「哔哔点啥」操作截图-1</figcaption>
  </figure>
<figure>
    <img src="https://lmm.elizen.me/images/2020/12/bber-3.jpg" width="50%"/><img src="https://lmm.elizen.me/images/2020/12/bber-4.jpg" width="50%" />
    <figcaption>「哔哔点啥」操作截图-2</figcaption>
  </figure>
<h3 id="一键部署及绑定">一键部署及绑定</h3>
<p>1.点击以下按钮将 BBer 一键部署到云开发</p>
<p><a rel="link" href="https://console.cloud.tencent.com/tcb/env/index?action=CreateAndDeployCloudBaseProject&amp;appUrl=https%3A%2F%2Fgithub.com%2Flmm214%2Fbber&amp;branch=main"><img class="avatar" loading="lazy" src="https://main.qcloudimg.com/raw/67f5a389f1ac6f3b4d04c7256438e44f.svg" alt=""></a></p>
<p>2.进入<a href="https://console.cloud.tencent.com/tcb/env/login">环境-登录授权</a>，启用“匿名登录”</p>
<p>3.进入<a href="https://console.cloud.tencent.com/tcb/env/safety">环境-安全配置</a>，将博客网址添加到“WEB安全域名”</p>
<p>4.进入<a href="https://console.cloud.tencent.com/tcb/env/access">环境-HTTP访问服务</a>，复制链接备用。</p>
<p><img loading='lazy' src="https://lmm.elizen.me/images/2020/12/bber-11.png" alt="bber-11"  /></p>
<p>5.进入<a href="https://console.cloud.tencent.com/tcb/scf/index">云函数</a>，修改自定义apikey <code>bber</code> 并保存备用。</p>
<p><img loading='lazy' src="https://lmm.elizen.me/images/2020/12/bber-10.png" alt="bber-10"  /></p>
<p>6.扫码进入公众号，输入命名绑定：</p>
<pre><code>/bber bber,https://你的云函数HTTP访问地址/bber
</code></pre><blockquote>
<p>注明：一键部署虽然方便，但是仅支持按量计费环境，当然大多数（日访问量10000-）是够用的。如果您希望，当免费资源用尽时，不产生费用请使用手动部署。</p>
</blockquote>
<hr>
<h3 id="前端部署">前端部署</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;bber&#34;</span>&gt;&lt;/<span style="color:#f92672">div</span>&gt;
&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text/javascript&#34;</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/gh/TencentCloudBase/tcb-js-sdk@master/tcbjs/1.10.10/tcb.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/gh/buddys/qq-wechat-emotion-parser@master/dist/qq-wechat-emotion-parser.min.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
&lt;<span style="color:#f92672">script</span>&gt;
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">app</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">tcb</span>.<span style="color:#a6e22e">init</span>({
      <span style="color:#a6e22e">env</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;bb-123xx&#39;</span>, <span style="color:#75715e">//这里是你的环境id
</span><span style="color:#75715e"></span>      <span style="color:#75715e">//region: &#34;ap-guangzhou&#34;
</span><span style="color:#75715e"></span>  })
&lt;/<span style="color:#f92672">script</span>&gt;
&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text/javascript&#34;</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/gh/lmm214/bber@0.0.1/bber.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">style</span>&gt;
  .<span style="color:#a6e22e">timeline</span> <span style="color:#f92672">ul</span> {<span style="color:#66d9ef">margin</span>:<span style="color:#ae81ff">0</span>;}
  .<span style="color:#a6e22e">timeline</span> <span style="color:#f92672">ul</span> <span style="color:#f92672">li</span> {<span style="color:#66d9ef">background</span>:<span style="color:#ae81ff">#3b3d42</span>;<span style="color:#66d9ef">list-style-type</span>:<span style="color:#66d9ef">none</span>;<span style="color:#66d9ef">position</span>:<span style="color:#66d9ef">relative</span>;<span style="color:#66d9ef">width</span>:<span style="color:#ae81ff">3</span><span style="color:#66d9ef">px</span>;<span style="color:#66d9ef">margin-left</span>:<span style="color:#ae81ff">2</span><span style="color:#66d9ef">em</span>;<span style="color:#66d9ef">padding</span>:<span style="color:#ae81ff">0.8</span><span style="color:#66d9ef">em</span> <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2</span><span style="color:#66d9ef">em</span>;}
  .<span style="color:#a6e22e">timeline</span> <span style="color:#f92672">ul</span> <span style="color:#f92672">li</span>::<span style="color:#a6e22e">after</span> {<span style="color:#66d9ef">transform</span>: rotate(<span style="color:#ae81ff">45</span><span style="color:#66d9ef">deg</span>);<span style="color:#66d9ef">content</span>:<span style="color:#e6db74">&#39;&#39;</span>;<span style="color:#66d9ef">background-color</span>: <span style="color:#ae81ff">#3b3d42</span>;<span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">block</span>;<span style="color:#66d9ef">position</span>: <span style="color:#66d9ef">absolute</span>;<span style="color:#66d9ef">top</span>: <span style="color:#ae81ff">10</span><span style="color:#66d9ef">px</span>;<span style="color:#66d9ef">left</span>: <span style="color:#ae81ff">-5</span><span style="color:#66d9ef">px</span>;<span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">0.8</span><span style="color:#66d9ef">em</span>;<span style="color:#66d9ef">height</span>: <span style="color:#ae81ff">0.8</span><span style="color:#66d9ef">em</span>;<span style="color:#66d9ef">outline</span>: <span style="color:#ae81ff">15</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> <span style="color:#ae81ff">#fff</span>;}
  .<span style="color:#a6e22e">timeline</span> <span style="color:#f92672">ul</span> <span style="color:#f92672">li</span> <span style="color:#f92672">div</span> {<span style="color:#66d9ef">position</span>:<span style="color:#66d9ef">relative</span>;<span style="color:#66d9ef">top</span>:<span style="color:#ae81ff">-13</span><span style="color:#66d9ef">px</span>;<span style="color:#66d9ef">left</span>:<span style="color:#ae81ff">3</span><span style="color:#66d9ef">em</span>;<span style="color:#66d9ef">width</span>:<span style="color:#ae81ff">670</span><span style="color:#66d9ef">px</span>;<span style="color:#66d9ef">padding</span>:<span style="color:#ae81ff">0</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">16</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">0</span><span style="color:#66d9ef">px</span>;}
  .<span style="color:#a6e22e">timeline</span> <span style="color:#f92672">ul</span> <span style="color:#f92672">li</span> <span style="color:#f92672">p</span>.<span style="color:#a6e22e">datatime</span>{<span style="color:#66d9ef">color</span>: <span style="color:#ae81ff">#fafafa</span>;<span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">0.75</span><span style="color:#66d9ef">em</span>;<span style="color:#66d9ef">font-style</span>: <span style="color:#66d9ef">italic</span>;<span style="color:#66d9ef">background-color</span>: <span style="color:#ae81ff">#3b3d42</span>;<span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">inline</span><span style="color:#f92672">-</span><span style="color:#66d9ef">block</span>;<span style="color:#66d9ef">padding</span>:<span style="color:#ae81ff">0.25</span><span style="color:#66d9ef">em</span> <span style="color:#ae81ff">1</span><span style="color:#66d9ef">em</span> <span style="color:#ae81ff">0.2</span><span style="color:#66d9ef">em</span> <span style="color:#ae81ff">1</span><span style="color:#66d9ef">em</span>;}
  .<span style="color:#a6e22e">timeline</span> <span style="color:#f92672">ul</span> <span style="color:#f92672">li</span> <span style="color:#f92672">p</span>.<span style="color:#a6e22e">datacont</span>{<span style="color:#66d9ef">margin</span>:<span style="color:#ae81ff">0.65</span><span style="color:#66d9ef">em</span> <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0.3</span><span style="color:#66d9ef">em</span>;}
  .<span style="color:#a6e22e">timeline</span> <span style="color:#f92672">ul</span> <span style="color:#f92672">li</span> <span style="color:#f92672">p</span>.<span style="color:#a6e22e">datacont</span> <span style="color:#f92672">img</span>{<span style="color:#66d9ef">display</span>:<span style="color:#66d9ef">block</span>;<span style="color:#66d9ef">width</span>:<span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>;}
  .<span style="color:#a6e22e">timeline</span> <span style="color:#f92672">ul</span> <span style="color:#f92672">li</span> <span style="color:#f92672">p</span>.<span style="color:#a6e22e">datacont</span> <span style="color:#f92672">img</span><span style="color:#f92672">[</span><span style="color:#f92672">src</span><span style="color:#f92672">*=</span><span style="color:#e6db74">&#34;emotion&#34;</span><span style="color:#f92672">]</span>{<span style="color:#66d9ef">display</span>:<span style="color:#66d9ef">inline</span><span style="color:#f92672">-</span><span style="color:#66d9ef">block</span>;<span style="color:#66d9ef">width</span>:<span style="color:#66d9ef">auto</span>;}
  .<span style="color:#a6e22e">timeline</span> <span style="color:#f92672">ul</span> <span style="color:#f92672">li</span> <span style="color:#f92672">p</span>.<span style="color:#a6e22e">datafrom</span>{<span style="color:#66d9ef">color</span>: <span style="color:#ae81ff">#aaa</span>;<span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">0.75</span><span style="color:#66d9ef">em</span> <span style="color:#75715e">!important</span>;<span style="color:#66d9ef">font-style</span>: <span style="color:#66d9ef">italic</span>;}
  .<span style="color:#a6e22e">timeline</span> <span style="color:#f92672">ul</span> <span style="color:#f92672">li</span> <span style="color:#f92672">p</span>{<span style="color:#66d9ef">margin</span>:<span style="color:#ae81ff">0</span>;<span style="color:#66d9ef">font-size</span>:<span style="color:#ae81ff">16</span><span style="color:#66d9ef">px</span>;<span style="color:#66d9ef">letter-spacing</span>:<span style="color:#ae81ff">1</span><span style="color:#66d9ef">px</span>;<span style="color:#66d9ef">color</span>: <span style="color:#ae81ff">#3b3d42</span>;}
  <span style="color:#f92672">button</span>{<span style="color:#66d9ef">border-radius</span>:<span style="color:#ae81ff">0</span>;}
  .<span style="color:#a6e22e">dark-theme</span> .<span style="color:#a6e22e">timeline</span> <span style="color:#f92672">ul</span> <span style="color:#f92672">li</span> <span style="color:#f92672">div</span> <span style="color:#f92672">p</span>{<span style="color:#66d9ef">color</span>:<span style="color:#ae81ff">#fafafa</span>;}
  .<span style="color:#a6e22e">dark-theme</span> .<span style="color:#a6e22e">timeline</span> <span style="color:#f92672">ul</span> <span style="color:#f92672">li</span> <span style="color:#f92672">div</span> <span style="color:#f92672">p</span> <span style="color:#f92672">svg</span>{fill:<span style="color:#ae81ff">#fafafa</span>;}
  .<span style="color:#a6e22e">dark-theme</span> .<span style="color:#a6e22e">timeline</span> <span style="color:#f92672">ul</span> <span style="color:#f92672">li</span> <span style="color:#f92672">p</span>.<span style="color:#a6e22e">datafrom</span>{<span style="color:#66d9ef">color</span>: <span style="color:#ae81ff">#aaa</span>;}
  .<span style="color:#a6e22e">dark-theme</span> .<span style="color:#a6e22e">timeline</span> <span style="color:#f92672">ul</span> <span style="color:#f92672">li</span>{<span style="color:#66d9ef">background</span>:<span style="color:#ae81ff">#3b3d42</span>;}
  .<span style="color:#a6e22e">dark-theme</span> .<span style="color:#a6e22e">timeline</span> <span style="color:#f92672">ul</span> <span style="color:#f92672">li</span>::<span style="color:#a6e22e">after</span>{<span style="color:#66d9ef">outline</span>: <span style="color:#ae81ff">15</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> <span style="color:#ae81ff">#292a2d</span>;}
  @<span style="color:#66d9ef">media</span> <span style="color:#f92672">(</span><span style="color:#f92672">max-width</span>:<span style="color:#a6e22e">860px</span><span style="color:#f92672">)</span> {
    .<span style="color:#a6e22e">timeline</span> <span style="color:#f92672">ul</span> <span style="color:#f92672">li</span>{<span style="color:#66d9ef">margin-left</span>:<span style="color:#ae81ff">0</span>;}
    .<span style="color:#a6e22e">timeline</span> <span style="color:#f92672">ul</span> <span style="color:#f92672">li</span> <span style="color:#f92672">div</span>{<span style="color:#66d9ef">width</span>:calc(<span style="color:#ae81ff">100</span><span style="color:#66d9ef">vw</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">75</span><span style="color:#66d9ef">px</span>);<span style="color:#66d9ef">left</span>:<span style="color:#ae81ff">30</span><span style="color:#66d9ef">px</span>;}
  }
&lt;/<span style="color:#f92672">style</span>&gt;
</code></pre></div><p>具体页面参考 <a href="https://github.com/lmm214/immmmm/blob/master/themes/hello-friend/layouts/_default/bb.html">bb.html</a></p>
<hr>
<h3 id="手动部署创建应用">手动部署：创建应用</h3>
<p>1.<a href="https://curl.qcloud.com/KnnJtUom">注册云开发CloudBase</a></p>
<p>2.进入<a href="https://console.cloud.tencent.com/tcb/">云开发控制台</a>，新建环境，请按需配置环境</p>
<blockquote>
<p>提示：环境名称自由填写，推荐选择计费方式包年包月，套餐版本基础班 1，超出免费额度不会收费，如果提示选择“应用模板”，请选择“空模板”</p>
</blockquote>
<blockquote>
<p>推荐创建上海环境。如选择广州环境，需要在 twikoo.init() 时额外指定环境 region: &ldquo;ap-guangzhou&rdquo;</p>
</blockquote>
<p>3.进入<a href="https://console.cloud.tencent.com/tcb/env/login">环境-登录授权</a>，启用“匿名登录”</p>
<p>4.进入<a href="https://console.cloud.tencent.com/tcb/env/safety">环境-安全配置</a>，将网站域名添加到“WEB安全域名”</p>
<p>5.进入<a href="https://console.cloud.tencent.com/tcb/db/">数据库</a>，新建数据库集合，命名 <code>talks</code>，权限设置为 “所有用户可读，仅管理员可写”。</p>
<p><img loading='lazy' src="https://lmm.elizen.me/images/2020/12/talks.jpg" alt="talks"  /></p>
<h3 id="手动部署云函数部署">手动部署：云函数部署</h3>
<p>1.接着 <a href="https://console.cloud.tencent.com/tcb/scf/index">新建云函数</a></p>
<p>函数名称 <code>bber</code> （可自定义），进入 <code>函数代码</code> 编辑，复制 <a href="https://github.com/lmm214/bber/blob/main/bber/index.js">index.js</a> 代码丢入 <code>index.js</code>，然后确定。</p>
<p>2.点击“文件 - 新建文件”，复制 <a href="https://github.com/lmm214/bber/blob/main/bber/package.json">package.json</a> 代码丢入 <code>package.json</code>，点击 <code>保存并安装依赖</code>。</p>
<p>3.进入<a href="https://console.cloud.tencent.com/tcb/env/access">环境-HTTP访问服务</a>，新建，路径与云函数名匹配。</p>
<p><img loading='lazy' src="https://lmm.elizen.me/images/2020/12/bb-tx-1.png" alt="bb-tx-1"  /></p>
<p>现在点开看一下，提示 <code>key不匹配</code>，成功！</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">https://你后台显示的.ap-shanghai.app.tcloudbase.com/bber
</code></pre></div><p>！！！<strong>注意：第一时间修改云函数中 <code>bber</code> 这个预设的「自定义apikey」</strong>！！！</p>
<h3 id="扫码绑定">扫码绑定</h3>
<figure>
    <img src="https://lmm.elizen.me/images/2020/05/bbds.png"/><figcaption>「哔哔点啥」微信公众号 2.0</figcaption></figure>

<pre><code>/bber bber,https://你的云函数HTTP访问地址/bber
</code></pre><p><strong>其实公众号仅用作了转发文字内容</strong>，具体功能都是各自的云函数，好处是，直接浏览器访问以下链接、第三方能发起POST工具、iOS的快捷方式等都能调用！</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">https://你后台显示的.ap-shanghai.app.tcloudbase.com/bb?key=云函数里设置的<span style="color:#960050;background-color:#1e0010">&amp;</span>from=自己发挥一个<span style="color:#960050;background-color:#1e0010">&amp;</span>text=哔哔的内容
</code></pre></div><h3 id="旧数据转化">旧数据转化</h3>
<p>把 LC 上的评论导出并进行格式转化，形成如下格式，<code>from</code> 字段是我自己后来加的。</p>
<pre><code>{&quot;_id&quot;:&quot;4ec5c2495fe84db1000046a47026ed51&quot;,&quot;from&quot;:&quot;微信公众号&quot;,&quot;content&quot;:&quot;恶果之地得到各“金卡”莫名就通关+1&quot;,&quot;date&quot;:{&quot;$date&quot;:&quot;2020-12-27T07:38:10.844Z&quot;}}
</code></pre><h3 id="附赠1-alfred-workflow">附赠1: Alfred Workflow</h3>
<p><a href="https://github.com/lmm214/diybug/raw/main/%E6%B5%AE%E5%93%94%E4%BA%BA%E7%94%9F2.0.alfredworkflow">浮哔人生.alfredworkflow</a></p>
<p><img loading='lazy' src="https://lmm.elizen.me/images/2020/12/fbrs.png" alt="fbrs.png"  /></p>
<p>输入好对应的 HTTP访问地址、KEY ，输入 <code>b /d</code> 就能删除最新一条哔哔</p>
<h3 id="附赠2-bber-weixin">附赠2: BBer-weixin</h3>
<p>点击以下按钮将 BBer-weixin 微信公众号后端，一键部署到云开发</p>
<p><a rel="link" href="https://console.cloud.tencent.com/tcb/env/index?action=CreateAndDeployCloudBaseProject&amp;appUrl=https%3A%2F%2Fgithub.com%2Flmm214%2Fbber-weixin&amp;branch=main"><img class="avatar" loading="lazy" src="https://main.qcloudimg.com/raw/67f5a389f1ac6f3b4d04c7256438e44f.svg" alt=""></a></p>
<p>对接的微信公众号简要流程：</p>
<p>1.点击 <a href="https://console.cloud.tencent.com/tcb/scf/index">bber-weixin</a> 云函数，右上角**【编辑】**，开启**【固定IP】**，留存**公网固定IP**。
<photos><img loading='lazy' src="https://lmm.elizen.me/images/2020/12/bbwx-1.png" alt="bbwx-1"  /><img loading='lazy' src="https://lmm.elizen.me/images/2020/12/bbwx-3.png" alt="bbwx-3"  /><img loading='lazy' src="https://lmm.elizen.me/images/2020/12/bbwx-2.png" alt="bbwx-2"  /></photos></p>
<p>2.进入<a href="https://console.cloud.tencent.com/tcb/env/access">环境-HTTP访问服务</a>，获取<code>触发路径链接</code>并留存，如以下格式：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">https://bb-f5c0f-222222.ap-shanghai.app.tcloudbase.com/bber
</code></pre></div><p>3.打开 <a href="https://mp.weixin.qq.com/">微信公众平台</a>，进入开发-基本配置，获取<code>AppID</code>和<code>AppSecret</code>留存，修改<code>IP白名单</code>为上一步的公网固定IP。继续服务器配置：</p>
<p><img loading='lazy' src="https://lmm.elizen.me/images/2020/12/bbwx-4.png" alt="bbwx-4"  /></p>
<p>一个<code>URL</code>，即第2步留存的触发链接；</p>
<p>一个<code>Token</code>，预设为 <code>weixin</code></p>
<p><strong>!!!先不点，不点，不点，不点提交！！！</strong></p>
<p>4.回 <a href="https://console.cloud.tencent.com/tcb/scf/index">bber-weixin</a> 云函数，填入<code>微信公众号appid</code>、<code>微信公众号appsecret</code> 保存。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">token</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;weixin&#39;</span> <span style="color:#75715e">// 微信公众号的服务器验证用的令牌 token
</span><span style="color:#75715e">//填入自己的微信公众号appid和appsecret
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">wxappid</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;微信公众号appid&#39;</span>,
    <span style="color:#a6e22e">wxappsecret</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;微信公众号appsecret&#39;</span>,
</code></pre></div><p>5.回 <a href="https://mp.weixin.qq.com/">微信公众平台</a>，提交，验证成功！</p>
<p>6.回 <a href="https://console.cloud.tencent.com/tcb/scf/index">bber-weixin</a> 云函数，注释第44行代码，保存。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">    <span style="color:#66d9ef">if</span>(<span style="color:#a6e22e">tmpStr</span> <span style="color:#f92672">==</span> <span style="color:#a6e22e">signature</span>){
        <span style="color:#75715e">//请求来源鉴权
</span><span style="color:#75715e"></span>        <span style="color:#75715e">//成功后注释下行代码
</span><span style="color:#75715e"></span>        <span style="color:#75715e">//return event.queryStringParameters.echostr //成功后注释本行代码
</span><span style="color:#75715e"></span>        <span style="color:#75715e">//成功后注释上行代码
</span></code></pre></div><p>7.手动配置或更新代码： <a href="https://github.com/lmm214/bber-weixin/tree/main/bber-weixin">https://github.com/lmm214/bber-weixin/tree/main/bber-weixin</a></p>]]></content>
            
                 
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://immmmm.com/tags/%E6%8A%98%E8%85%BE" term="%E6%8A%98%E8%85%BE" label="折腾" />
                            
                        
                    
                
            
        </entry>
    
        
        <entry>
            <title type="html"><![CDATA[二〇二一，你好]]></title>
            <link href="https://immmmm.com/hi-2021/" rel="alternate" type="text/html" />
            
                <id>https://immmmm.com/hi-2021/</id>
            
            
            <published>2021-01-02T14:22:57+08:00</published>
            <updated>2021-01-02T14:22:57+08:00</updated>
            
            
            <content type="html"><![CDATA[<p>回望，过去这一年，在如此不确定下仍能过着几乎正常的生活，万分庆幸！</p>
<p>生命不止，折腾不息。</p>
<h3 id="gridea">Gridea</h3>
<p>弃用某静态托管平台，启用 <a href="https://gridea.dev/">Gridea</a> 分离出 <a href="https://i.immmmm.com/">「林小沐」</a> “晒娃”子博客。</p>
<p>转制了几款主题： <a href="https://immmmm.com/gridea-theme-puti/">Gridea Theme Puti</a>、<a href="https://immmmm.com/gridea-theme-motify/">Gridea Theme Motify</a>、<a href="https://immmmm.com/gridea-theme-webstack/">Gridea Theme WebStack</a></p>
<h3 id="hugo">Hugo</h3>
<p>感谢 <a href="https://dearroy.com/">@罗伊</a> 收留这小站，借助 VS Code + Github + VPS 开启静态博客新体验！前两项实现多设备同步数据，后一项实现域名管理、站点提速。</p>
<p>也相应折腾了些，如： <a href="https://github.com/lmm214/immmmm/tree/master/themes/hello-friend">「hello-friend」自用版</a>、<a href="https://immmmm.com/hugo-theme-webstack/">Hugo Theme Webstack</a></p>
<h3 id="评论和哔哔">评论和哔哔</h3>
<p>停用 Leancloud，转入腾讯云 Cloudbase，舒心多了，被流控邮件提醒烦了。</p>




	
		
	


<div class="post-preview">
  <div class="post-preview--meta" style="width:100%;">
    <div class="post-preview--middle">
      <h4 class="post-preview--title">
        <a target="_blank" href="https://immmmm.com/hello-twikoo-comment/">启用 Twikoo 评论系统</a>
      </h4>
      <time class="post-preview--date">2020-11-21</time>
      
      <small>#折腾&nbsp;</small>
      
      <section style="max-height:96px;overflow:hidden;" class="post-preview--excerpt">
        感谢 @iMaeGoo 大神用爱发电，顺利启用 Twikoo 评论系统，并完美迁移 Valine 评论数据。
下午在 @大大的小蜗牛  博客看到评论系统右下角竟然不是 Valine 哦，赫然显示这 Twikoo，啥？！
原来是基于腾讯云开发的评论系统，换！

      </section>
    </div>
  </div>
  
</div>



<p>有些功能被限，总有人出来继续造轮子！再次感谢 <a href="https://www.imaegoo.com/">@iMaeGoo</a> !</p>
<h3 id="微信小程序">微信小程序</h3>
<p><img loading='lazy' src="https://lmm.elizen.me/images/2021/01/xcx.png" alt="xcx"  /></p>
<p>前后边学边做将近三年，用 <a href="https://cloud.minapp.com/">知晓云</a> 作为后端和 <a href="https://github.com/weilanwl/ColorUI">ColorUI</a> 样式库，基本上已发开出自己想开发的功能，从最初每年几百的后端费用，现在累计广告收入也有 3K，大部分收入是特殊时期。当然，平常也就几毛，刚出了个开屏广告，每天又能多个几毛，月底勉强攒美式！</p>
<p>对于折腾，不再偏执追求像素级、100% Online，适当的妥协能让自己多睡几天早觉。</p>
<h3 id="玩物废志">玩物废志</h3>
<p><img loading='lazy' src="https://lmm.elizen.me/images/2021/01/brawl.PNG" alt="brawl"  /></p>
<p>年中成为 Nintendo Switch 国行勇士一员，旷野肝了200h+，荒野肝了6K多场，无数次凌晨，如知吸烟有害依然照吸不误，以此自我说明基因强大。</p>
<h3 id="十年之约">十年之约</h3>
<figure>
    <img src="https://lmm.elizen.me/images/2021/01/foreverblog-1.png"/><figcaption>博客十年之约</figcaption></figure>

<p>RSS聚合：<a href="http://rss.foreverblog.cn/">http://rss.foreverblog.cn/</a></p>
<p>当初也利用 Google API 整过一个，现在坚持用 feed 订阅算是一种情怀啦！</p>
<h3 id="阅读刷剧">阅读刷剧</h3>
<p>工作外的八小时，带娃、看书、刷剧、刷圈……都要！让自己成为有点俗、有点雅、有点意思不单调的人。</p>
<p>阅读上几乎都是“医学”和“教育”主题，异常赞同这句“理论的实践性解读，教学实践的理论性反思”，特别对于一线实践的我们来说，更应该体现自己的“实践智慧”，避免教学改革常见弊病，即一直在追赶潮流，最终却一无所成。</p>
<p>感慨，挑书不误看书功。追着一本里的一串参考书目，大大降低踩坑几率。</p>
<p><a href="https://movie.douban.com/subject/33477335/">https://movie.douban.com/subject/33477335/</a></p>
<p><a href="https://movie.douban.com/subject/30223100/">https://movie.douban.com/subject/30223100/</a></p>
<p><a href="https://movie.douban.com/subject/25806638/">https://movie.douban.com/subject/25806638/</a></p>
<p>刷剧，感慨，平淡是真！</p>
<h3 id="结语">结语</h3>
<p>遗憾总归有的，过去的就让他过去吧，抬头是星辰大海，低头是爱与被爱。</p>]]></content>
            
                 
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://immmmm.com/tags/%E6%97%A5%E5%B8%B8" term="%E6%97%A5%E5%B8%B8" label="日常" />
                            
                        
                    
                
            
        </entry>
    
        
        <entry>
            <title type="html"><![CDATA[哔哔 Pro]]></title>
            <link href="https://immmmm.com/bb-pro/" rel="alternate" type="text/html" />
            
                <id>https://immmmm.com/bb-pro/</id>
            
            
            <published>2020-12-28T23:39:12+08:00</published>
            <updated>2020-12-28T23:39:12+08:00</updated>
            
            
            <content type="html"><![CDATA[<h3 id="pro-n01">Pro N0.1</h3>
<p>前端支持链接、图片显示。发哔哔的时候插入图片链接或网址链接，会自动识别显示。核心代码来自 <a href="https://www.heson10.com/">@黑石</a> :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">urlToLink</span>(<span style="color:#a6e22e">str</span>) {
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">re</span> <span style="color:#f92672">=</span><span style="color:#e6db74">/\bhttps?:\/\/(?!\S+(?:jpe?g|png|bmp|gif|webp|gif))\S+/g</span>;
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">re_forpic</span> <span style="color:#f92672">=</span><span style="color:#e6db74">/\bhttps?:\/\/.*?(\.gif|\.jpeg|\.png|\.jpg|\.bmp|\.webp)/g</span>;
  <span style="color:#a6e22e">str</span> <span style="color:#f92672">=</span><span style="color:#a6e22e">str</span>.<span style="color:#a6e22e">replace</span>(<span style="color:#a6e22e">re</span>,<span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">website</span>) {
    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;&lt;a href=&#39;&#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">website</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;&#39; target=&#39;_blank&#39;&gt; &lt;i class=&#39;iconfont icon-lianjie-copy&#39;&gt;&lt;/i&gt;链接 &lt;/a&gt;&#34;</span>;
  });
  <span style="color:#a6e22e">str</span> <span style="color:#f92672">=</span><span style="color:#a6e22e">str</span>.<span style="color:#a6e22e">replace</span>(<span style="color:#a6e22e">re_forpic</span>,<span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">imgurl</span>) {
    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;&lt;img src=&#39;&#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">imgurl</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;&#39;  /&gt; &#34;</span>;
  });
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">str</span>;
}
</code></pre></div><p>完整代码参考本主题 <a href="https://github.com/lmm214/immmmm/blob/master/themes/hello-friend/layouts/_default/bb.html">bb.html</a> ，主要加了上面的过滤正则 <code>urlToLink(item.content)</code> 。</p>
<h3 id="pro-n02">Pro N0.2</h3>
<p>接入 <a href="https://7bu.top/">去不图床</a> ，注册之后访问：</p>
<p><code>https://7bu.top/api/token?email=你的邮箱&amp;password=你的密码</code> 记下 <code>token</code> 值。</p>
<p><a href="https://7bu.top/index/api.html">图片上传API</a> 异常直接，post <code>https://7bu.top/api/upload</code> ，header 带上自己的 <code>token</code>，不带则匿名上传。用表单的请求参数 <code>image</code> 提交 <code>File</code>。</p>
<p>相关教程：<a href="https://dusays.com/241/">去不图床PicGo上传插件的使用</a>、<a href="https://blog.svend.cc/upic/tutorials/custom/">uPic 图床配置教程 - 自定义</a></p>
<h3 id="pro-n03">Pro N0.3</h3>
<p>iOS 快捷指令上传图片后返回链接，到哔哔输入框。</p>
<p><photos><img loading='lazy' src="https://lmm.elizen.me/images/2020/12/bbpro-1.jpeg" alt="bbpro-1"  /><img loading='lazy' src="https://lmm.elizen.me/images/2020/12/bbpro-2.jpeg" alt="bbpro-2"  /><img loading='lazy' src="https://lmm.elizen.me/images/2020/12/bbpro-3.png" alt="bbpro-3"  /><img loading='lazy' src="https://lmm.elizen.me/images/2020/12/bbpro-4.png" alt="bbpro-4"  /></photos></p>
<p>甚至用“快捷指令调用其他指令”实现同步发哔哔和Flomo。</p>
<p><img loading='lazy' src="https://lmm.elizen.me/images/2020/12/bbpro-5.jpeg" alt="bbpro-5"  /></p>
<p>具体其他平台发布方式，改日改日再琢磨～</p>
]]></content>
            
                 
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://immmmm.com/tags/%E6%8A%98%E8%85%BE" term="%E6%8A%98%E8%85%BE" label="折腾" />
                            
                        
                    
                
            
        </entry>
    
</feed>
